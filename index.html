<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üíå A Little Letter</title>
  <style>
    :root{
      --bg1:#fff6f0;
      --bg2:#fde6ee;
      --ink:#2a2a2a;
      --paper:#fffdf8;
      --paper2:#fff7ee;
      --accent:#ff4d6d;
      --accent2:#6c63ff;
      --shadow: 0 20px 60px rgba(0,0,0,.18);
      --shadow2: 0 16px 40px rgba(0,0,0,.16);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      overflow-x:hidden;
      background:
        radial-gradient(1200px 700px at 15% 10%, var(--bg2), transparent 60%),
        radial-gradient(1000px 600px at 85% 25%, #eaf3ff, transparent 55%),
        linear-gradient(135deg, var(--bg1), #ffffff);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .stage{
      width:min(1100px, 100%);
      position:relative;
      padding:56px 0;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Floating hearts/sparkles */
    .sparkle{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:.65;
    }
    .sparkle span{
      position:absolute;
      font-size:18px;
      animation: floatUp 7s linear infinite;
      opacity:0;
      transform: translateY(30px);
    }
    @keyframes floatUp{
      0%{ opacity:0; transform: translateY(30px) scale(.9); }
      10%{ opacity:.85; }
      60%{ opacity:.85; }
      100%{ opacity:0; transform: translateY(-220px) scale(1.05); }
    }

    /* Envelope wrapper */
    .envelope-wrap{
      width:min(760px, 96%);
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      transform: translateZ(0);
    }

    .hint{
      position:absolute;
      top:-42px;
      text-align:center;
      width:100%;
      font-weight:700;
      letter-spacing:.2px;
      opacity:.9;
      user-select:none;
    }
    .hint small{ display:block; font-weight:600; opacity:.75; }

    .envelope{
      width:100%;
      aspect-ratio: 16 / 10;
      position:relative;
      cursor:pointer;
      border-radius: 26px;
      filter: drop-shadow(var(--shadow));
      user-select:none;
      transition: transform .2s ease;
      outline:none;
    }
    .envelope:active{ transform: scale(.99); }

    .env-back{
      position:absolute;
      inset:0;
      background: linear-gradient(135deg, #ffe0ea, #fff1f6);
      border-radius: 26px;
      border: 1px solid rgba(0,0,0,.08);
      overflow:hidden;
    }
    .env-back:before{
      content:"";
      position:absolute;
      inset:-90px;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,77,109,.16), transparent 55%),
        radial-gradient(circle at 80% 70%, rgba(108,99,255,.12), transparent 55%);
      transform: rotate(8deg);
    }

    .env-flap{
      position:absolute;
      left:0; right:0;
      top:0;
      height:55%;
      background: linear-gradient(180deg, #ffd1df, #ffe8f0);
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform 900ms cubic-bezier(.2,.9,.2,1);
      border-top-left-radius: 26px;
      border-top-right-radius: 26px;
      border: 1px solid rgba(0,0,0,.08);
      border-bottom:none;
    }

    .env-front{
      position:absolute;
      inset:0;
      border-radius: 26px;
      overflow:hidden;
      pointer-events:none;
    }

    .env-front:before{
      content:"";
      position:absolute;
      left:0; right:0;
      bottom:0;
      height:65%;
      background: linear-gradient(135deg, #ffd6e3, #fff4f8);
      clip-path: polygon(0 100%, 50% 0, 100% 100%, 100% 100%, 0 100%);
      border-top: 1px solid rgba(0,0,0,.06);
    }
    .env-front:after{
      content:"";
      position:absolute;
      inset:0;
      border: 1px solid rgba(0,0,0,.10);
      border-radius:26px;
    }

    .seal{
      position:absolute;
      left:50%;
      top:52%;
      transform: translate(-50%, -50%);
      width:78px;
      height:78px;
      border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #ff9fb3, var(--accent));
      box-shadow: 0 12px 22px rgba(255,77,109,.32);
      display:grid;
      place-items:center;
      font-size:30px;
      border: 1px solid rgba(0,0,0,.08);
      transition: transform 450ms ease, opacity 450ms ease;
      z-index: 3;
    }

    /* =========================
       LETTER (BIGGER + SCROLL IF NEEDED + PAPER TEXTURE)
       ========================= */
    .letter{
      position:absolute;
      left:50%;
      bottom:8%;
      transform: translateX(-50%) translateY(40%) scale(.98);
      width:min(720px, 92%);
      height:min(560px, 86%);
      opacity:0;
      transition: transform 950ms cubic-bezier(.2,.9,.2,1), opacity 650ms ease;
      z-index: 4;
      border-radius: 22px;
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: var(--shadow2);
      background: linear-gradient(180deg, var(--paper), var(--paper2));
      overflow:hidden;
    }

    /* Paper texture layer */
    .letter:before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 20% 10%, rgba(255,77,109,.06), transparent 45%),
        radial-gradient(circle at 90% 20%, rgba(108,99,255,.05), transparent 45%),
        repeating-linear-gradient(
          0deg,
          rgba(0,0,0,.012) 0px,
          rgba(0,0,0,.012) 1px,
          transparent 10px,
          transparent 14px
        );
      opacity:.9;
      pointer-events:none;
      filter: blur(.2px);
    }

    .letter .top-edge{
      height:18px;
      background:
        repeating-linear-gradient(90deg,
          rgba(255,77,109,.26) 0 14px,
          rgba(108,99,255,.16) 14px 28px);
      opacity:.72;
      position:relative;
      z-index:1;
    }

    .letter-inner{
      position:relative;
      z-index:2;
      padding:30px 34px 24px;
      height: calc(100% - 18px);
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    /* scroll area (only if needed) */
    .content{
      flex: 1 1 auto;
      overflow:auto;
      padding-right:8px;
      scrollbar-width: thin;
    }
    .content::-webkit-scrollbar{ width:10px; }
    .content::-webkit-scrollbar-thumb{
      background: rgba(0,0,0,.12);
      border-radius: 999px;
      border: 3px solid rgba(255,255,255,.7);
    }

    .letter h1{
      margin:0;
      font-size: clamp(24px, 3.5vw, 36px);
      line-height:1.1;
      letter-spacing:.2px;
    }
    .letter p{
      margin:0;
      font-size: clamp(15px, 2.15vw, 18px);
      line-height:1.55;
      opacity:.94;
      white-space: normal;
    }

    .buttons{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-top:12px;
      align-items:center;
    }
    button{
      appearance:none;
      border:none;
      padding:12px 16px;
      border-radius: 999px;
      font-weight:900;
      cursor:pointer;
      font-size:16px;
      transition: transform .12s ease, box-shadow .2s ease, filter .2s ease;
      box-shadow: 0 10px 20px rgba(0,0,0,.14);
      position:relative;
    }
    button:active{ transform: scale(.98); }

    .yes{
      background: linear-gradient(135deg, #ff4d6d, #ff8fab);
      color:#fff;
    }
    .no{
      background: linear-gradient(135deg, #cfd8ff, #f2f4ff);
      color:#1f2a44;
    }

    .result{
      margin-top:10px;
      padding:12px 14px;
      border-radius: 14px;
      background: rgba(255,255,255,.7);
      border: 1px solid rgba(0,0,0,.06);
      display:none;
      line-height:1.45;
    }

    .signature{
      font-weight:900;
      opacity:.9;
      margin-top:10px;
    }

    /* OPEN state */
    .open .env-flap{ transform: rotateX(165deg); }
    .open .seal{ transform: translate(-50%, -50%) scale(.92); opacity:.15; }
    .open .letter{
      transform: translateX(-50%) translateY(-6%) scale(1);
      opacity:1;
    }

    /* =========================
       PHOTOS AROUND THE LETTER (FRAME)
       ========================= */
    .photos{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index: 2; /* behind letter (z=4), above envelope back */
    }

    .polaroid{
      position:absolute;
      width:170px;
      aspect-ratio: 1 / 1;
      background:#fff;
      border-radius:18px;
      box-shadow: 0 20px 40px rgba(0,0,0,.28);
      padding:10px;
      border: 1px solid rgba(0,0,0,.12);
      transform: translateY(20px) rotate(var(--r));
      opacity:0;
      filter: saturate(1.03);
      animation: none;
    }

    .polaroid img{
      width:100%;
      height:100%;
      object-fit:cover;
      border-radius:14px;
      display:block;
    }

    /* Float/sway animation */
    @keyframes sway {
      0%   { transform: translateY(0px) rotate(var(--r)); }
      50%  { transform: translateY(-10px) rotate(calc(var(--r) + 1.2deg)); }
      100% { transform: translateY(0px) rotate(var(--r)); }
    }

    .open .polaroid{
      opacity:1;
      transform: translateY(0) rotate(var(--r));
      animation: sway 4.8s ease-in-out infinite;
      animation-delay: var(--d, 0s);
    }

    /* Frame positions: OUTSIDE the letter area */
    .p1{ left:-220px; top:130px; --r:-10deg; --d:.1s; }
    .p2{ right:-220px; top:130px; --r:10deg; --d:.6s; }
    .p3{ left:-220px; bottom:90px; --r:7deg; --d:1.0s; }
    .p4{ right:-220px; bottom:90px; --r:-8deg; --d:1.4s; }
    .p5{
      left:50%;
      top:-210px;
      transform: translateX(-50%) rotate(-3deg);
      --r:-3deg;
      --d:.35s;
      width:200px;
    }

    /* Mobile: keep them around without covering */
    @media (max-width: 900px){
      .polaroid{ width:130px; }
      .p1{ left:-140px; top:160px; }
      .p2{ right:-140px; top:160px; }
      .p3{ left:-140px; bottom:110px; }
      .p4{ right:-140px; bottom:110px; }
      .p5{ top:-160px; width:160px; }
      .letter-inner{ padding:26px 22px 20px; }
    }
    @media (max-width: 560px){
      .polaroid{ width:110px; }
      .p1{ left:-110px; top:190px; }
      .p2{ right:-110px; top:190px; }
      .p3{ left:-110px; bottom:120px; }
      .p4{ right:-110px; bottom:120px; }
      .p5{ top:-135px; width:150px; }
      .hint{ top:-36px; font-size:14px; }
    }

    /* NO button shake */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-3px); }
      40% { transform: translateX(3px); }
      60% { transform: translateX(-2px); }
      80% { transform: translateX(2px); }
    }
    .no.shake{
      animation: shake .25s ease-in-out 1;
    }
  </style>
</head>
<body>
  <div class="stage" id="stage">
    <div class="sparkle" aria-hidden="true" id="sparkle"></div>

    <div class="envelope-wrap">
      <div class="hint" id="hint">
        Tap the envelope to open üíå
        <small>(and be nice üò≠)</small>
      </div>

      <!-- Photos -->
      <div class="photos" aria-hidden="true">
        <div class="polaroid p1" id="photo1"><img src="pic1.jpeg" alt="pic 1"></div>
        <div class="polaroid p2" id="photo2"><img src="pic2.jpeg" alt="pic 2"></div>
        <div class="polaroid p3" id="photo3"><img src="pic3.jpeg" alt="pic 3"></div>
        <div class="polaroid p4" id="photo4"><img src="pic4.jpeg" alt="pic 4"></div>
        <div class="polaroid p5" id="photo5"><img src="pic5.jpeg" alt="pic 5"></div>
      </div>

      <!-- Envelope -->
      <div class="envelope" id="envelope" role="button" tabindex="0" aria-label="Open the letter">
        <div class="env-back"></div>
        <div class="env-flap"></div>
        <div class="env-front"></div>
        <div class="seal">üíó</div>

        <!-- Letter -->
        <div class="letter" id="letter" aria-live="polite">
          <div class="top-edge"></div>

          <div class="letter-inner">
            <h1>Heyyy üôÑ</h1>

            <div class="content" id="content">
              <p>
                So you know, sometimes I feel like you hate me...(jk)
                <br><br>
                Before we went out for the first time, I already knew that we clicked (even tho we're so different).
                <br><br>
                Talking to you and texting you was something I looked forward to, and receiving a notification from you made me happy that you cared(remember that reel you sent?)
                From watching movies with you to just hearing you talk about whatever it may be, I was always paying attention, even if sometimes you thought I wasnt lol                
		<br><br>
                Once we finally got the courage to meet in person, I realized that you were the same girl I talked to on the phone. Maybe a little cuter than the photos (i swear bro)
		When we kissed in the pier, I was as happy as a guy could be. Lowkey or highkey, you're really really romantic. And pretty too. All of this is to say:
                <br><br>
                <strong>Ana, will you be my valentines?</strong> 
              </p>

              <div class="result" id="result"></div>
              <div class="signature">‚Äî from Fabiann</div>
            </div>

            <div class="buttons">
              <button class="yes" id="yesBtn">Yes</button>
              <button class="no" id="noBtn">No</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const stage = document.getElementById('stage');
    const envelope = document.getElementById('envelope');
    const hint = document.getElementById('hint');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const result = document.getElementById('result');
    const sparkle = document.getElementById('sparkle');

    // Photo to "hide behind" (pick a guinea pig one)
    const hideBehind = document.getElementById('photo4'); // right-bottom photo (change if you want)

    // Floating hearts/sparkles
    const emojis = ["üíó","‚ú®","üíå","üíû","üå∏","‚≠ê"];
    function spawnSparkles(count = 18){
      sparkle.innerHTML = "";
      for(let i=0;i<count;i++){
        const s = document.createElement("span");
        s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        s.style.left = Math.random()*100 + "%";
        s.style.top = (70 + Math.random()*30) + "%";
        s.style.animationDelay = (Math.random()*4) + "s";
        s.style.fontSize = (14 + Math.random()*14) + "px";
        sparkle.appendChild(s);
      }
    }
    spawnSparkles();

    function openLetter(){
      stage.classList.add('open');
      hint.style.opacity = "0";
      hint.style.pointerEvents = "none";
    }

    envelope.addEventListener('click', openLetter);
    envelope.addEventListener('keydown', (e) => {
      if(e.key === "Enter" || e.key === " ") openLetter();
    });

    // YES
    yesBtn.addEventListener('click', () => {
      result.style.display = "block";
      result.innerHTML = `
        <strong>Thank god bro</strong> ü•πüíñ<br>
        I hope you know you're really one of a kind.
      `;
      spawnSparkles(30);
    });

    // NO: shake + run to hide behind a guinea pig photo
    let noCount = 0;

    function shakeNo(){
      noBtn.classList.remove('shake');
      // force reflow
      void noBtn.offsetWidth;
      noBtn.classList.add('shake');
    }

    function moveNoBehindPhoto(){
      const envRect = envelope.getBoundingClientRect();
      const photoRect = hideBehind.getBoundingClientRect();

      // Position relative to envelope (since button will be absolutely positioned in envelope)
      const x = (photoRect.left - envRect.left) + (photoRect.width * 0.20);
      const y = (photoRect.top - envRect.top) + (photoRect.height * 0.58);

      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
      noBtn.style.zIndex = "1"; // behind letter (z=4) so it feels like it‚Äôs hiding
      noBtn.style.opacity = "0.95";
    }

    function noResponse(){
      noCount++;
      shakeNo();
      moveNoBehindPhoto();

      const lines = [
        "nahhh üò≠ try again",
        "it literally ran away üôà",
        "be serious üò§",
        "it‚Äôs hiding behind the guinea pig now",
        "ok but you meant YES üòå",
        "final answer: yes üíå"
      ];

      result.style.display = "block";
      result.textContent = lines[Math.min(noCount-1, lines.length-1)];
    }

    noBtn.addEventListener('mouseenter', noResponse);
    noBtn.addEventListener('click', (e) => {
      e.preventDefault();
      noResponse();
    });

    // Auto-open after a short delay
    setTimeout(() => {
      if(!stage.classList.contains('open')) openLetter();
    }, 850);

    // Reposition NO button on resize (keeps it ‚Äúbehind‚Äù photo)
    window.addEventListener('resize', () => {
      if(noCount > 0) moveNoBehindPhoto();
    });
  </script>
</body>
</html>
